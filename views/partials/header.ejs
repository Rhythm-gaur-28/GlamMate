<nav class="navbar">
  <div class="navbar-container">
    <div class="logo">
      <a href="/">GlamMate</a>
    </div>
    <ul class="nav-links">
      <li><a href="/">Home</a></li>
      <li><a href="/explore">Explore</a></li>
      <li><a href="/suggestion">Outfit Suggestion</a></li>
      <li><a href="/closet">My Closet</a></li>
      <% if (user) { %>
        <li class="nav-posts">
          <div class="posts-dropdown">
            <span>Post Look</span>
            <div class="dropdown-menu">
              <a href="/posts/add">Add Post</a>
              <a href="/posts/view">View Posts</a>
            </div>
          </div>
        </li>
      <% } %>
      <li><a href="/chat">Style Chat</a></li>
      <li><a href="/contact">Contact</a></li>
      <% if (user) { %>
        <li class="nav-profile">
          <div class="profile-dropdown">
            <img src="<%= user.avatar || '/images/default-avatar.jpg' %>" alt="Avatar" class="profile-avatar" />
            <span class="profile-username">
              <%= user.username %>
            </span>
            <div class="dropdown-menu">
              <a href="/profile/<%= user.username %>">View Profile</a>
              <a href="/logout">Logout</a>
            </div>
          </div>
        </li>
      <% } else { %>
        <li><a href="/auth">Login / Signup</a></li>
      <% } %>
    </ul>
  </div>
</nav>
<% if (message) { %>
  <div id="messageModal" class="message-modal <%= message.type %>">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <div class="message-icon">
        <% if (message.type==='success' ) { %>
          <i class="fa-solid fa-check-circle"></i>
        <% } else { %>
          <i class="fa-solid fa-xmark-circle"></i>
        <% } %>
      </div>
      <p>
        <%= message.text %>
      </p>
    </div>
  </div>
<% } %>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById('messageModal');
    const closeBtn = document.querySelector('.close-btn');
    if (modal) {
      modal.style.display = 'flex';
      closeBtn.addEventListener('click', () => {
        modal.style.display = 'none';
      });
      window.addEventListener('click', (event) => {
        if (event.target === modal) {
          modal.style.display = 'none';
        }
      });
      setTimeout(() => {
        modal.style.display = 'none';
      }, 5000);
    }
  });
</script>